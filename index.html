<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>順番待ち受付</title>

<style>
body{
  font-family: system-ui, sans-serif;
  background:#f7f7f7;
  padding:10px;
}
.card{
  background:#fff;
  border-radius:14px;
  padding:20px;
  max-width:420px;
  margin:auto;
}
label{display:block;margin-top:12px;}
input,select,button{
  width:100%;
  padding:12px;
  margin-top:6px;
}
button{
  background:#ff6b00;
  color:#fff;
  border:none;
  border-radius:10px;
  margin-top:20px;
}
.checkbox{
  display:flex;
  gap:6px;
  align-items:center;
  margin-top:12px;
}
.result{
  margin-top:16px;
  text-align:center;
}
</style>
</head>

<body>
<div class="card">
<h2 style="text-align:center;">焼肉じゅん 順番待ち</h2>

<label>お名前（カタカナ）</label>
<input id="name">

<label>人数</label>
<input type="number" id="count" min="1">

<div class="checkbox">
  <input type="checkbox" id="useMail" onchange="toggleMail()">
  <label>メールで通知を受ける</label>
</div>

<div id="mailArea" style="display:none;">
  <label>メールアドレス</label>
  <input type="email" id="email">
</div>

<label>小学生以下の人数</label>
<select id="kids">
  <option value="0">0</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4人以上</option>
</select>

<label>子供いす</label>
<select id="chair">
  <option value="なし">不要</option>
  <option value="あり">必要</option>
</select>

<button onclick="register()">受付する</button>
<div class="result" id="result"></div>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

<script>
const firebaseConfig = {
  databaseURL: "https://zyunule-default-rtdb.firebaseio.com"
};

const app = firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function toggleMail(){
  mailArea.style.display = useMail.checked ? "block" : "none";
}

function register(){
  const name=nameInput.value.trim();
  const count=countInput.value;
  const useMail=useMail.checked;
  const email=emailInput.value.trim();

  if(!name||!count) return alert("必須項目を入力してください");
  if(useMail&&!email) return alert("メールを入力してください");

  firebase.database().ref("waitlist").push({
    name,
    count,
    kids:kids.value,
    chair:chair.value,
    email:useMail?email:"",
    time:Date.now()
  });

  result.innerHTML = `<b>${name}様</b><br>受付しました`;
}
</script>
</body>
</html>
