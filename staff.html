<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>店員用 順番管理</title>

<style>
body{font-family:system-ui;background:#f2f2f2;padding:10px;}
.box{background:#fff;border-radius:12px;padding:12px;margin-bottom:10px;}
.row{display:flex;justify-content:space-between;align-items:center;margin-top:6px;}
button{border:none;padding:6px 10px;border-radius:6px;}
.done{background:#999;color:#fff;}
</style>
</head>

<body>
<h2 style="text-align:center;">順番管理（店員用）</h2>
<div id="list"></div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>

<script>
const firebaseConfig = {
  databaseURL: "https://zyunule-default-rtdb.firebaseio.com"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const listArea=document.getElementById("list");

firebase.database().ref("waitlist").on("value",snap=>{
  listArea.innerHTML="";
  const data=snap.val();
  if(!data){listArea.innerHTML="待ちなし";return;}

  Object.entries(data).forEach(([key,item])=>{
    const div=document.createElement("div");
    div.className="box";
    div.innerHTML=`
      <b>${item.name} 様</b>（${item.count}名）
      <div>子供：${item.kids} / 椅子：${item.chair}</div>
      <div class="row">
        <button class="done" onclick="finish('${key}')">消去</button>
      </div>
    `;
    listArea.appendChild(div);
  });
});

function finish(key){
  firebase.database().ref("waitlist/"+key).remove();
}
</script>
</body>
</html>
